'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.tryGetFromStreamList = undefined;

var _utils = require('./utils');

var _pytils = require('pytils');

var _streamPromise = function _streamPromise(getPathFrom) {
  return function (fileName, url) {
    (0, _utils.cannotBeUndefined)({ fileName: fileName, url: url });
    return (0, _utils.stream)(url, getPathFrom(fileName));
  };
};

var tryGetFromStreamList = exports.tryGetFromStreamList = async function tryGetFromStreamList(streamList) {
  var path = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : './download';
  var prefix = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'vd';
  var format = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 'mp4';

  var streamPromise = _streamPromise((0, _utils.getPathToFile)(path, prefix, format));

  var promiseList = (0, _pytils.mapx)(streamList, function (url, fileName) {
    return streamPromise(fileName, url);
  });

  Promise.all(promiseList).then(function (res) {
    return console.log('End all download\'s', res);
  });
};